<?xml version="1.0"?>
<!--
%
% This file is managed by Ansible.
% Do not edit this file manually.
% Any changes will be automatically reverted.
%
-->
<job_conf>
<plugins {% if galaxy_jobconf.plugin_workers is defined %} workers="{{ galaxy_jobconf.plugin_workers }}" {% endif %}>
{% for plugin in galaxy_jobconf['plugins'] %}
		<plugin id="{{ plugin['id'] }}" type="runner" {% if 'load' in plugin %}load="{{ plugin['load'] }}"{% endif %}>
{% if 'params' in plugin %}
{% for k in plugin['params'] | sort %}
			<param id="{{ k }}">{{ plugin['params'][k] }}</param>
{% endfor %}
{% endif %}
		</plugin>
{% endfor %}
	</plugins>
	<handlers{% if galaxy_jobconf.handlers.assign_with is defined %} assign_with="{{ galaxy_jobconf.handlers.assign_with }}"{% endif %}{% if galaxy_jobconf.handlers.default is defined %} default="{{ galaxy_jobconf.handlers.default }}"{% endif %}{% if galaxy_jobconf.handlers.max_grab is defined %} max_grab="{{ galaxy_jobconf.handlers.max_grab }}"{% endif %}{% if galaxy_jobconf.handlers.ready_window_size is defined %} ready_window_size="{{ galaxy_jobconf.handlers.ready_window_size }}"{% endif %}>
{% for n in range(galaxy_jobconf.handlers.count) %}
		<handler id="main.job-handler.{{ n + 1 }}"/>
{% endfor %}
	</handlers>
	<destinations default="{{ galaxy_jobconf.default_destination }}">
{% for destination in galaxy_jobconf['destinations'] %}
		<destination id="{{ destination['id'] }}" runner="{{ destination['runner'] }}">
{% if 'env' in destination %}
{% for k in destination['env'] | sort %}
			<env id="{{ k }}">{{ destination['env'][k] }}</env>
{% endfor %}
{% endif %}
{% if 'params' in destination %}
{% for k in destination['params'] | sort %}
			<param id="{{ k }}">{{ destination['params'][k] }}</param>
{% endfor %}
{% endif %}
{% if 'raw' in destination %}
			{{ destination['raw'] }}
{% endif %}
		</destination>
{% endfor %}
	</destinations>
	<tools>
{% if 'tools' in galaxy_jobconf %}
{% for tool in galaxy_jobconf['tools'] %}
		<tool id="{{ tool['id'] }}" destination="{{ tool['destination'] }}" />
{% endfor %}
{% endif %}
{% for n in range(galaxy_handler_count) %}
		<tool id="echo_main_handler{{ n + 1 }}" destination="local" handler="handler{{ n + 1 }}"/>
{% endfor %}
	</tools>
{% if 'limits' in galaxy_jobconf %}
	<limits>
{% for limit in galaxy_jobconf['limits'] %}
{% if 'id' in limit %}
		<limit type="{{ limit['type'] }}" id="{{ limit['id'] }}">{{ limit['value'] }}</limit>
{% else %}
		<limit type="{{ limit['type'] }}">{{ limit['value'] }}</limit>
{% endif %}		
{% endfor %}
	</limits>
{% endif %}
</job_conf>
